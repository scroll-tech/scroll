# ZKRollup



> ZKRollup

This contract maintains essential data for zk rollup, including: 1. a list of pending messages, which will be relayed to layer 2; 2. the block tree generated by layer 2 and it&#39;s status.

*the message queue is not used yet, the offline relayer only use events in `L1ScrollMessenger`.*

## Methods

### batches

```solidity
function batches(bytes32) external view returns (bytes32 prevStateRoot, bytes32 currStateRoot, bytes32 withdrawTrieRoot, bytes32 publicInputHash, uint64 batchIndex, uint64 timestamp, uint64 numTransactions, uint64 numL1Messages, bool finalized)
```

Mapping from batch id to batch struct.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | bytes32 | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| prevStateRoot | bytes32 | undefined |
| currStateRoot | bytes32 | undefined |
| withdrawTrieRoot | bytes32 | undefined |
| publicInputHash | bytes32 | undefined |
| batchIndex | uint64 | undefined |
| timestamp | uint64 | undefined |
| numTransactions | uint64 | undefined |
| numL1Messages | uint64 | undefined |
| finalized | bool | undefined |

### commitBatch

```solidity
function commitBatch(IZKRollup.Batch _batch) external nonpayable
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _batch | IZKRollup.Batch | undefined |

### commitBatches

```solidity
function commitBatches(IZKRollup.Batch[] _batches) external nonpayable
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _batches | IZKRollup.Batch[] | undefined |

### finalizeBatchWithProof

```solidity
function finalizeBatchWithProof(bytes32 _batchHash, uint256[] _proof, uint256[] _instances) external nonpayable
```

finalize commited batch in layer 1

*will add more parameters if needed.*

#### Parameters

| Name | Type | Description |
|---|---|---|
| _batchHash | bytes32 | undefined |
| _proof | uint256[] | undefined |
| _instances | uint256[] | undefined |

### finalizedBatches

```solidity
function finalizedBatches(uint256) external view returns (bytes32)
```

Mapping from batch index to finalized batch hash.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | uint256 | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bytes32 | undefined |

### getL2MessageRoot

```solidity
function getL2MessageRoot(bytes32 _batchHash) external view returns (bytes32)
```

Return the merkle root of L2 message tree.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _batchHash | bytes32 | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bytes32 | undefined |

### importGenesisBatch

```solidity
function importGenesisBatch(IZKRollup.Batch _genesisBatch) external nonpayable
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _genesisBatch | IZKRollup.Batch | undefined |

### initialize

```solidity
function initialize() external nonpayable
```






### isBatchFinalized

```solidity
function isBatchFinalized(uint256 _batchIndex) external view returns (bool)
```

Return whether the batch is finalized by batch index.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _batchIndex | uint256 | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bool | undefined |

### isBatchFinalized

```solidity
function isBatchFinalized(bytes32 _batchHash) external view returns (bool)
```

Return whether the batch is finalized by batch hash.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _batchHash | bytes32 | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bool | undefined |

### isSequencer

```solidity
function isSequencer(address) external view returns (bool)
```

Whether an account is a sequencer.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bool | undefined |

### lastFinalizedBatchHash

```solidity
function lastFinalizedBatchHash() external view returns (bytes32)
```

The latest finalized batch hash.




#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bytes32 | undefined |

### layer2ChainId

```solidity
function layer2ChainId() external view returns (uint256)
```

The chain id of the corresponding layer 2 chain.




#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | uint256 | undefined |

### layer2GasLimit

```solidity
function layer2GasLimit(uint256) external view returns (uint256)
```

Return the layer 2 block gas limit.



#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | uint256 | undefined |

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | uint256 | undefined |

### owner

```solidity
function owner() external view returns (address)
```



*Returns the address of the current owner.*


#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined |

### renounceOwnership

```solidity
function renounceOwnership() external nonpayable
```



*Leaves the contract without owner. It will not be possible to call `onlyOwner` functions anymore. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner.*


### revertBatch

```solidity
function revertBatch(bytes32 _batchHash) external nonpayable
```

revert a pending batch.

*one can only revert unfinalized batches.*

#### Parameters

| Name | Type | Description |
|---|---|---|
| _batchHash | bytes32 | undefined |

### transferOwnership

```solidity
function transferOwnership(address newOwner) external nonpayable
```



*Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.*

#### Parameters

| Name | Type | Description |
|---|---|---|
| newOwner | address | undefined |

### updateSequencer

```solidity
function updateSequencer(address _account, bool _status) external nonpayable
```

Update the status of sequencer.

*This function can only called by contract owner.*

#### Parameters

| Name | Type | Description |
|---|---|---|
| _account | address | The address of account to update. |
| _status | bool | The status of the account to update. |



## Events

### CommitBatch

```solidity
event CommitBatch(bytes32 indexed batchHash)
```

Emitted when a new batch is commited.



#### Parameters

| Name | Type | Description |
|---|---|---|
| batchHash `indexed` | bytes32 | undefined |

### FinalizeBatch

```solidity
event FinalizeBatch(bytes32 indexed batchHash)
```

Emitted when a batch is finalized.



#### Parameters

| Name | Type | Description |
|---|---|---|
| batchHash `indexed` | bytes32 | undefined |

### OwnershipTransferred

```solidity
event OwnershipTransferred(address indexed previousOwner, address indexed newOwner)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| previousOwner `indexed` | address | undefined |
| newOwner `indexed` | address | undefined |

### RevertBatch

```solidity
event RevertBatch(bytes32 indexed batchHash)
```

Emitted when a batch is reverted.



#### Parameters

| Name | Type | Description |
|---|---|---|
| batchHash `indexed` | bytes32 | undefined |

### UpdateSequencer

```solidity
event UpdateSequencer(address account, bool status)
```

Emitted when owner updates the status of sequencer.



#### Parameters

| Name | Type | Description |
|---|---|---|
| account  | address | The address of account updated. |
| status  | bool | The status of the account updated. |



